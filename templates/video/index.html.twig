{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
	<main id="col-main">
			
			<div class="flexslider progression-studios-dashboard-slider">
		      <ul class="slides">
					<li class="progression_studios_animate_left">
						<div class="progression-studios-slider-dashboard-image-background video-header-content">
                            <div class="video-header-container">
                            <video autoplay loop muted id="video-header">
                                <source src="{{asset('videos/' ~ firstBackgroundVideo[0].videolink)}}">
                            </video>
                            </div>
                            
                            <div class="progression-studios-slider-display-table overlay">
								<div class="progression-studios-slider-vertical-align">
								
									<div class="container">
																				
										<video id="VideoLightbox-1" src="{{asset('videos/' ~ firstBackgroundVideo[0].videolink)}}"  width="960" height="540"></video>

										<div class="progression-studios-slider-dashboard-caption-width">
											<div class="progression-studios-slider-caption-align">
												<h6 style="color:white">Films</h6>
												<ul class="progression-studios-slider-rating">
													<li>PG-13</li><li>HD</li>
												</ul>
												<h2><a href="#VideoLightbox-1" style="color:white">{{firstBackgroundVideo[0].videotitle}}</a></h2>
												<ul class="progression-studios-slider-meta">
													<li style="color:white">Date de sortie : {{firstBackgroundVideo[0].parutiondate | date("d/m/Y")}}</li>
													<li style="color:white">Durée : {{firstBackgroundVideo[0].videoduration}}</li>
													<li style="color:white">{{firstBackgroundVideo[0].category.categoryname}}</li>
												</ul>
												<p class="progression-studios-slider-description" style="color:white;font-size:large">
													{{firstBackgroundVideo[0].videodescription}}
												</p>
												
                                                <a class="btn btn-green-pro btn-slider-pro btn-shadow-pro afterglow" href="#VideoLightbox-1" onclick="stopVideo()"><i class="fas fa-play"></i> Voir la vidéo </a>
												<div class="clearfix"></div>      
												
											</div><!-- close .progression-studios-slider-caption-align -->
										</div><!-- close .progression-studios-slider-caption-width -->
									
									</div><!-- close .container -->
								
								</div><!-- close .progression-studios-slider-vertical-align -->
							</div><!-- close .progression-studios-slider-display-table -->
						
							<div class="progression-studios-slider-mobile-background-cover"></div>
						</div><!-- close .progression-studios-slider-image-background -->
					</li>
					<li class="progression_studios_animate_in">
						<div class="progression-studios-slider-dashboard-image-background">
                            
                            <div class="video-header-container">
                                <video autoplay loop muted class="video-header" id="video-background">
                                    <source src="{{asset('videos/' ~ secondBackgroundVideo[0].videolink)}}">
                                </video>
                            </div>
                            
                            <div class="progression-studios-slider-display-table overlay">
								<div class="progression-studios-slider-vertical-align">
								
									<div class="container">
																				
							         	<video id="VideoLightbox-2" src="{{asset('videos/' ~ secondBackgroundVideo[0].videolink)}}" width="960" height="540"></video>
										
									<div class="progression-studios-slider-dashboard-caption-width">
											<div class="progression-studios-slider-caption-align">
												<h6 class="light-fonts-pro">Films</h6>
												<ul class="progression-studios-slider-rating">
													<li>PG-13</li><li>HD</li>
												</ul>
												<h2 class="light-fonts-pro"><a href="#VideoLightbox-2" style="color:white">{{secondBackgroundVideo[0].videotitle}}</a></h2>
												<ul class="progression-studios-slider-meta">
													<li style="color:white">Date de sortie: {{secondBackgroundVideo[0].parutiondate | date("d/m/Y")}}</li>
													<li style="color:white">Durée : {{secondBackgroundVideo[0].videoduration}}</li>
													<li style="color:white">{{secondBackgroundVideo[0].category.categoryname}}</li>
												</ul>
												<p class="progression-studios-slider-description light-fonts-pro" style="color:white;font-size:large">
													{{secondBackgroundVideo[0].videodescription}}
												</p>
												
												<a class="btn btn-green-pro btn-slider-pro afterglow" href="#VideoLightbox-2" onclick="videoStop()"><i class="fas fa-play"></i> Voir la vidéo</a>
												<div class="clearfix"></div>
												
											</div><!-- close .progression-studios-slider-caption-align -->
										</div><!-- close .progression-studios-slider-caption-width -->
									
									</div><!-- close .container -->
								
								</div><!-- close .progression-studios-slider-vertical-align -->
							</div><!-- close .progression-studios-slider-display-table -->
						
							<div class="progression-studios-slider-mobile-background-cover-dark"></div>
						</div><!-- close .progression-studios-slider-image-background -->
					</li>				
				</ul>
			</div><!-- close .progression-studios-slider - See /js/script.js file for options -->

			<ul class="dashboard-genres-pro" id="listvideo">

				{% for category in categories %}
				<li class="imagecategory">
					<a href="{{path("videobycategory", {"category":category.id})}}#listvideo">
						<img src="{{category.imagecategory}}" alt="image">
						<h6>{{category.categoryname}}</h6>
					</a>
				</li>
				{% endfor %}
			</ul>
			
			<div class="clearfix"></div>
			
			<div class="dashboard-container">
				
				{% for message in app.flashes('no_following') %}
				<div class="alert alert-danger" id="no_following">
					{{ message }}
				</div>
				{% endfor %}
				<h4 class="heading-extra-margin-bottom hello">Liste des videos</h4>
				<div class="row">
					{% for video in videos %}
					<div class="col-12 col-md-6 col-lg-4 col-xl-3">
						<div class="item-listing-container-skrn">
							<a href="{{path("movie", {"id" : video.id, "idcategory" : video.category.id})}}"><img src="{{asset('images/upload/' ~ video.videoimage)}}" alt="movies" class="imagemovie"></a>
							<div class="item-listing-text-skrn">
								<div class="item-listing-text-skrn-vertical-align">
									<h6 style="width:300px;text-overflow:ellipsis;white-space: nowrap;overflow:hidden;margin-left:-20px"><a href="{{path("movie", {"id" : video.id, "idcategory" : video.category.id})}}">{{video.videotitle}}</a></h6>
									<div style="float:left;margin-left:-20px">
										<img src="{{asset('images/avatar/' ~ video.username.imageuser.avatar)}}" class="rounded-circle" style="width:35px;height:35px;">
										{{video.username.username}} | {% if video.views is not null %} Vues : {{video.views}} {% else %} Aucune vue {% endif %}
									</div>
								</div><!-- close .item-listing-text-skrn-vertical-align -->
							</div><!-- close .item-listing-text-skrn -->
						</div><!-- close .item-listing-container-skrn -->
					</div><!-- close .col -->
					{% endfor %}
				</div><!-- close .row STOP-->
				
				<div class="pagination">
				<div class="navigation">
					{{ knp_pagination_render(videos) }}
				</div>
				</div>
			</div><!-- close .dashboard-container -->
		</main>	
{% endblock %}