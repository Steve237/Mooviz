{% extends 'base.html.twig' %}

{% block title %}Gestion des vidéos{% endblock %}

{% block body %}

<div class="container admin-section">
    <ul class="dashboard-sub-menu">
        <li><a href="{{path('users_list')}}">Liste des membres</a></li>
        <li><a href="{{path('notifications_list')}}">Notifications</a></li>
        <li><a href="{{path('videos_background')}}">Vidéos à la une</a></li>
        <li class="current"><a href="{{path('adminspace_videos')}}">Gestion des vidéos</a></li>
    </ul><!-- close .dashboard-sub-menu -->

    {% for message in app.flashes('admin_delete_video') %}
        <div class="alert alert-success" style="margin-top:20px">
          {{message}}
        </div>
    {% endfor %}
    <div class="row">
        {% for video in videos %}
        <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-4">
          <div class="item-listing-container-skrn" style="text-overflow: ellipsis;overflow:hidden">
                <a href="{{path("movie", {"id" : video.id, "idcategory" : video.category.id})}}"><img src="{{asset('images/upload/' ~ video.videoimage)}}" alt="Listing" class="imagemovie img-responsive"></a>
                <div class="item-listing-text-skrn">
                    <div class="item-listing-text-skrn-vertical-align">
                        <h6 style="width:300px;text-overflow:ellipsis;white-space: nowrap;overflow:hidden;margin-left:-20px">
                            <a href="{{path("movie", {"id" : video.id, "idcategory" : video.category.id})}}">{{video.videotitle}}</a>
                        </h6>
                        <div style="float:left;margin-left:-20px">
                            <img src="{{asset('images/upload/' ~ video.username.imageuser.avatar)}}" class="rounded-circle" style="width:35px;height:35px;">
                            <a href="{{path('channel', {'id': video.username.id})}}" style="color:blue">{{video.username.username}}</a> | {% if video.views is not null %} Vues : {{video.views}} {% else %} Aucune vue {% endif %}
                        </div>
                    </div><!-- close .item-listing-text-skrn-vertical-align -->
                </div><!-- close .item-listing-text-skrn -->
                <div style="padding:5px;text-align:right">
                    <a href="{{path('admin_delete_video', {'id': video.id})}}">
                        <button class="btn btn-primary btn-sm admin_delete_videos"><i class="fas fa-trash-alt fa-2x"></i></button>
                    </a>
                </div>
            </div><!-- close .item-listing-container-skrn -->
        </div><!-- close .col -->
        {% endfor %}
    </div><!-- close .row -->
    <div class="pagination">
        <div class="navigation">
            {{knp_pagination_render(videos)}}
        </div>
    </div>
</div>
{% endblock %}